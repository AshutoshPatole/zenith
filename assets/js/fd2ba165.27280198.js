"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6694],{3500:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var i=n(5893),t=n(1151);const a={sidebar_position:14,slug:"/email-protocols",title:"Email Protocols"},r=void 0,o={id:"Linux/email_protocols",title:"Email Protocols",description:"---",source:"@site/docs/Linux/email_protocols.mdx",sourceDirName:"Linux",slug:"/email-protocols",permalink:"/zenith/email-protocols",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"AshutoshPatole18",lastUpdatedAt:1706787221,formattedLastUpdatedAt:"Feb 1, 2024",sidebarPosition:14,frontMatter:{sidebar_position:14,slug:"/email-protocols",title:"Email Protocols"},sidebar:"tutorialSidebar",previous:{title:"Dynamic Host Configuration Protocol (DHCP)",permalink:"/zenith/dhcp"},next:{title:"System Security Service Daemon (SSSD)",permalink:"/zenith/sssd"}},l={},c=[{value:"Mail Transfer Protocol",id:"mail-transfer-protocol",level:2},{value:"Mail Access Protocols",id:"mail-access-protocols",level:2},{value:"POP",id:"pop",level:3},{value:"IMAP",id:"imap",level:3},{value:"Mail Program Classifications",id:"mail-program-classifications",level:2},{value:"Mail Transport Agent (MTA)",id:"mail-transport-agent-mta",level:3},{value:"Mail Delivery Agent (MDA)",id:"mail-delivery-agent-mda",level:3},{value:"Mail User Agent (MUA)",id:"mail-user-agent-mua",level:3},{value:"Mailx Configuration",id:"mailx-configuration",level:2}];function d(e){const s={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.p,{children:"Email is delivered using a client/server architecture. An email message is created using a mail client program. This program then sends the message to a server. The server then forwards the message to the recipient's email server, where the message is then supplied to the recipient's email client.\nTo enable this process, a variety of standard network protocols allow different machines, often running different operating systems and using different email programs, to send and receive email."}),"\n",(0,i.jsx)(s.h2,{id:"mail-transfer-protocol",children:"Mail Transfer Protocol"}),"\n",(0,i.jsxs)(s.p,{children:["Mail delivery from a client application to the server, and from an originating server to the destination server, is handled by the ",(0,i.jsx)(s.strong,{children:"Simple Mail Transfer Protocol (SMTP)"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"The primary purpose of SMTP is to transfer email between mail servers. However, it is critical for email clients as well. To send email, the client sends the message to an outgoing mail server, which in turn contacts the destination mail server for delivery. For this reason, it is necessary to specify an SMTP server when configuring an email client."}),"\n",(0,i.jsxs)(s.p,{children:["One important point to make about the SMTP protocol is that it does not require authentication. This allows anyone on the Internet to send email to anyone else or even to large groups of people. It is this characteristic of SMTP that makes junk email or spam possible. Imposing relay restrictions limits random users on the Internet from sending email through your SMTP server, to other servers on the internet. Servers that do not impose such restrictions are called ",(0,i.jsx)(s.strong,{children:"open relay servers"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"mail-access-protocols",children:"Mail Access Protocols"}),"\n",(0,i.jsxs)(s.p,{children:["There are two primary protocols used by email client applications to retrieve email from mail servers: the ",(0,i.jsx)(s.strong,{children:"Post Office Protocol (POP)"})," and the ",(0,i.jsx)(s.strong,{children:"Internet Message Access Protocol (IMAP)"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"pop",children:"POP"}),"\n",(0,i.jsxs)(s.p,{children:["The default POP server under Red Hat Enterprise Linux is ",(0,i.jsx)(s.code,{children:"/usr/lib/cyrus-imapd/pop3d"})," and is provided by the ",(0,i.jsx)(s.code,{children:"cyrus-imapd"})," package. When using a POP server, email messages are downloaded by email client applications. By default, most POP email clients are automatically configured to delete the message on the email server after it has been successfully transferred, however this setting usually can be changed. POP is fully compatible with important Internet messaging standards, such as ",(0,i.jsx)(s.strong,{children:"Multipurpose Internet Mail Extensions (MIME)"}),", which allow for email attachments."]}),"\n",(0,i.jsx)(s.h3,{id:"imap",children:"IMAP"}),"\n",(0,i.jsxs)(s.p,{children:["The default IMAP server under Red Hat Enterprise Linux is ",(0,i.jsx)(s.code,{children:"/usr/lib/cyrus-imapd/imapd"})," and is provided by the ",(0,i.jsx)(s.code,{children:"cyrus-imapd"})," package. When using an IMAP mail server, email messages remain on the server where users can read or delete them. IMAP also allows client applications to create, rename, or delete mail directories on the server to organize and store email."]}),"\n",(0,i.jsx)(s.p,{children:"IMAP is particularly useful for those who access their email using multiple machines. The protocol is also convenient for users connecting to the mail server via a slow connection, because only the email header information is downloaded for messages until opened, saving bandwidth. The user also has the ability to delete messages without viewing or downloading them."}),"\n",(0,i.jsx)(s.h2,{id:"mail-program-classifications",children:"Mail Program Classifications"}),"\n",(0,i.jsx)(s.h3,{id:"mail-transport-agent-mta",children:"Mail Transport Agent (MTA)"}),"\n",(0,i.jsx)(s.p,{children:"A Mail Transport Agent (MTA) transports email messages between hosts using SMTP. A message may involve several MTAs as it moves to its intended destination."}),"\n",(0,i.jsx)(s.p,{children:"While the delivery of messages between machines may seem rather straightforward, the entire process of deciding if a particular MTA can or should accept a message for delivery is quite complicated. In addition, due to problems from spam, use of a particular MTA is usually restricted by the MTA's configuration or the access configuration for the network on which the MTA resides."}),"\n",(0,i.jsx)(s.h3,{id:"mail-delivery-agent-mda",children:"Mail Delivery Agent (MDA)"}),"\n",(0,i.jsxs)(s.p,{children:["A Mail Delivery Agent (MDA) is invoked by the MTA to file incoming email in the proper user's mailbox. In many cases, the MDA is actually a ",(0,i.jsx)(s.strong,{children:"Local Delivery Agent (LDA)"}),", such as mail or Procmail.\nAny program that actually handles a message for delivery to the point where it can be read by an email client application can be considered an MDA. For this reason, some MTAs (such as ",(0,i.jsx)(s.strong,{children:"Sendmail"})," and ",(0,i.jsx)(s.strong,{children:"Postfix"}),") can fill the role of an MDA when they append new email messages to a local user's mail spool file. In general, MDAs do not transport messages between systems nor do they provide a user interface; MDAs distribute and sort messages on the local machine for an email client application to access."]}),"\n",(0,i.jsx)(s.h3,{id:"mail-user-agent-mua",children:"Mail User Agent (MUA)"}),"\n",(0,i.jsxs)(s.p,{children:["A Mail User Agent (MUA) is synonymous with an email client application. An MUA is a program that, at the very least, allows a user to read and compose email messages. MUAs may be graphical, such as Evolution, or have a very simple, text-based interface, such as ",(0,i.jsx)(s.code,{children:"mutt"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"mailx-configuration",children:"Mailx Configuration"}),"\n",(0,i.jsx)(s.p,{children:"In order to start sending mail from RHEL machines we have to setup SMTP configuration."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"[captain@marvel-studios ~]$ sudo yum install mailx -y\nLast metadata expiration check: 2:59:02 ago on Sun 20 Mar 2022 03:56:48 AM GMT.\nPackage mailx-12.5-29.el8.aarch64 is already installed.\nDependencies resolved.\nNothing to do.\nComplete!\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This will create a ",(0,i.jsx)(s.strong,{children:"mail.rc"})," file in /etc directory. We will be using sendgrid as our SMTP here, add these configuration at the end of the file."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:'title="/etc/mail.rc"',children:'# My configuration\nset smtp=smtp.sendgrid.net:587\nset smtp-auth-user=apikey\nset smtp-auth-password=<your-api-key>\nset ssl-verify=ignore\nset nss-config-dir=/etc/pki/nssdb/\nset smtp-use-starttls\nset from="no-reply@ashutoshpatole.me"\n'})}),"\n",(0,i.jsx)(s.p,{children:"Save and close the file. Now check if our setup works by sending a sample email."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'[captain@marvel-studios ~]$ echo "this is hello world" | mail -s "first mail" -v apatole479@gmail.com\nResolving host smtp.sendgrid.net . . . done.\nConnecting to 52.220.95.193:587 . . . connected.\n220 SG ESMTP service ready at geopod-ismtpd-2-1\n>>> EHLO vm1.subnet12091926.vcn12091926.oraclevcn.com\n250-smtp.sendgrid.net\n250-8BITMIME\n250-PIPELINING\n250-SIZE 31457280\n250-STARTTLS\n250-AUTH PLAIN LOGIN\n250 AUTH=PLAIN LOGIN\n>>> STARTTLS\n220 Begin TLS negotiation now\n>>> EHLO vm1.subnet12091926.vcn12091926.oraclevcn.com\n250-smtp.sendgrid.net\n250-8BITMIME\n250-PIPELINING\n250-SIZE 31457280\n250-STARTTLS\n250-AUTH PLAIN LOGIN\n250 AUTH=PLAIN LOGIN\n>>> AUTH LOGIN\n334 VXNlcm5hbWU6\n>>> YXBpa2V5\n334 UGFzc3dvcmQ6\n>>> U0cuQklpVHZ1bVFUWHVSajRiVVc3d1VVQS5VYXo5Y3o2cmowcjRxRjBPN1NtQmJqUkJrZEFTZGFIcGY1Nmd5eHZTQVlJ\n235 Authentication successful\n>>> MAIL FROM:<no-reply@ashutoshpatole.me>\n250 Sender address accepted\n>>> RCPT TO:<apatole479@gmail.com>\n250 Recipient address accepted\n>>> DATA\n354 Continue\n>>> .\n250 Ok: queued as xVKwZOunTierCGLz1Is_hg\n>>> QUIT\n221 See you later\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"-v"})," is verbose flag."]}),"\n"]})}function m(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>o,a:()=>r});var i=n(7294);const t={},a=i.createContext(t);function r(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1123],{5130:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=n(5893),i=n(1151);const r={sidebar_position:6,slug:"/acl",title:"Access Control Lists"},o=void 0,a={id:"Linux/ACL",title:"Access Control Lists",description:"---",source:"@site/docs/Linux/ACL.mdx",sourceDirName:"Linux",slug:"/acl",permalink:"/zenith/acl",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"AshutoshPatole18",lastUpdatedAt:1706788254,formattedLastUpdatedAt:"Feb 1, 2024",sidebarPosition:6,frontMatter:{sidebar_position:6,slug:"/acl",title:"Access Control Lists"},sidebar:"tutorialSidebar",previous:{title:"LVM Partition Management",permalink:"/zenith/logic-volume-commands"},next:{title:"Redundant Array of Independent Disks (RAID)",permalink:"/zenith/raid"}},l={},c=[{value:"Mounting File Systems",id:"mounting-file-systems",level:2},{value:"NFS",id:"nfs",level:2},{value:"Setting Access ACL",id:"setting-access-acl",level:2},{value:"Setting Default ACL",id:"setting-default-acl",level:2},{value:"Retreiving ACL",id:"retreiving-acl",level:2},{value:"Archiving file system with ACL",id:"archiving-file-system-with-acl",level:2}];function d(e){const s={admonition:"admonition",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"Files and directories have permission sets for the owner of the file, the group associated with the file, and all other users for the system. However, these permission sets have limitations. For example, different permissions cannot be configured for different users. Thus, Access Control Lists (ACLs) were implemented."}),"\n",(0,t.jsx)(s.p,{children:"Along with support in the kernel, the acl package is required to implement ACLs. It contains the utilities used to add, modify, remove, and retrieve ACL information. The cp and mv commands copy or move any ACLs associated with files and directories."}),"\n",(0,t.jsx)(s.h2,{id:"mounting-file-systems",children:"Mounting File Systems"}),"\n",(0,t.jsx)(s.p,{children:"Before using ACLs for a file or directory, the partition for the file or directory must be mounted with ACL support. If it is a local ext3 file system, it can mounted with the following command:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"mount -t ext3 -o acl <device-name> <partition>\n"})}),"\n",(0,t.jsx)(s.p,{children:"For example:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"mount -t ext3 -o acl /dev/VolGroup00/LogVol02 /work\n"})}),"\n",(0,t.jsx)(s.p,{children:"Alternatively, if the partition is listed in the /etc/fstab file, the entry for the partition can include the acl option:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"LABEL=/work      /work       ext3    acl        1 2\n"})}),"\n",(0,t.jsx)(s.p,{children:"If an ext3 file system is accessed via Samba and ACLs have been enabled for it, the ACLs are recognized because Samba has been compiled with the --with-acl-support option. No special flags are required when accessing or mounting a Samba share."}),"\n",(0,t.jsx)(s.h2,{id:"nfs",children:"NFS"}),"\n",(0,t.jsx)(s.p,{children:"By default, if the file system being exported by an NFS server supports ACLs and the NFS client can read ACLs, ACLs are utilized by the client system.\nTo disable ACLs on NFS shares when configuring the server, include the no_acl option in the /etc/exports file. To disable ACLs on an NFS share when mounting it on a client, mount it with the no_acl option via the command line or the /etc/fstab file."}),"\n",(0,t.jsx)(s.h2,{id:"setting-access-acl",children:"Setting Access ACL"}),"\n",(0,t.jsx)(s.p,{children:"There are two types of ACLs: access ACLs and default ACLs. An access ACL is the access control list for a specific file or directory. A default ACL can only be associated with a directory; if a file within the directory does not have an access ACL, it uses the rules of the default ACL for the directory. Default ACLs are optional."}),"\n",(0,t.jsx)(s.p,{children:"ACLs can be configured:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Per user"}),"\n",(0,t.jsx)(s.li,{children:"Per group"}),"\n",(0,t.jsx)(s.li,{children:"Via the effective rights mask\nFor users not in the user group for the file\nThe setfacl utility sets ACLs for files and directories. Use the -m option to add or modify the ACL of a file or directory:"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"setfacl -m <rules> <files>\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Rules ",(0,t.jsx)(s.code,{children:"(<rules>)"})," must be specified in the following formats. Multiple rules can be specified in the same command if they are separated by commas."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["u:",(0,t.jsx)(s.code,{children:"<uid>:<perms>"}),"\nSets the access ACL for a user. The user name or UID may be specified. The user may be any valid user on the system."]}),"\n",(0,t.jsxs)(s.li,{children:["g:",(0,t.jsx)(s.code,{children:"<gid>:<perms>"}),"\nSets the access ACL for a group. The group name or GID may be specified. The group may be any valid group on the system."]}),"\n",(0,t.jsxs)(s.li,{children:["m:",(0,t.jsx)(s.code,{children:"<perms>"}),"\nSets the effective rights mask. The mask is the union of all permissions of the owning group and all of the user and group entries."]}),"\n",(0,t.jsxs)(s.li,{children:["o:",(0,t.jsx)(s.code,{children:"<perms>"}),"\nSets the access ACL for users other than the ones in the group for the file."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["White space is ignored. Permissions ",(0,t.jsx)(s.code,{children:"(<perms>)"})," must be a combination of the characters r, w, and x for read, write, and execute.\nIf a file or directory already has an ACL, and the setfacl command is used, the additional rules are added to the existing ACL or the existing rule is modified.\nFor example, to give read and write permissions to user thor:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"setfacl -m u:thor:rw /project/somefile\n"})}),"\n",(0,t.jsx)(s.p,{children:"To remove all the permissions for a user, group, or others, use the -x option and do not specify any permissions:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"setfacl -x <rules> <files>\n"})}),"\n",(0,t.jsx)(s.p,{children:"For example, to remove all permissions from the user with UID 500:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"setfacl -x u:500 /project/somefile\n"})}),"\n",(0,t.jsx)(s.h2,{id:"setting-default-acl",children:"Setting Default ACL"}),"\n",(0,t.jsxs)(s.p,{children:["To set a default ACL, add ",(0,t.jsx)(s.code,{children:"d:"})," before the rule and specify a directory instead of a file name.\nFor example, to set the default ACL for the /share/ directory to read and execute for users not in the user group (an access ACL for an individual file can override it):"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"setfacl -m d:o:rx /share\n"})}),"\n",(0,t.jsx)(s.h2,{id:"retreiving-acl",children:"Retreiving ACL"}),"\n",(0,t.jsx)(s.p,{children:"To determine the existing ACLs for a file or directory, use the getfacl command. In the example below, the getfacl is used to determine the existing ACLs for a file."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"getfacl home/thor/picture.png\n"})}),"\n",(0,t.jsx)(s.p,{children:"The above command returns the following output:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# file: home/thor/picture.png\n# owner: thor\n# group: thor\nuser::rw-\ngroup::r--\nother::r--\n"})}),"\n",(0,t.jsxs)(s.admonition,{type:"tip",children:[(0,t.jsx)(s.h2,{id:"archiving-file-system-with-acl",children:"Archiving file system with ACL"}),(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"tar"})," and ",(0,t.jsx)(s.code,{children:"dump"})," commands do not backup ACLs. Instead use ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"star"})})," which is similar to tar to generate ACL archieve files."]})]})]})}function h(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>a,a:()=>o});var t=n(7294);const i={},r=t.createContext(i);function o(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Linux/lvm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Logic Volume Manager | Zenith</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ashutoshpatole.github.io/zenith/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ashutoshpatole.github.io/zenith/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ashutoshpatole.github.io/zenith/lvm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Logic Volume Manager | Zenith"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/zenith/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ashutoshpatole.github.io/zenith/lvm"><link data-rh="true" rel="alternate" href="https://ashutoshpatole.github.io/zenith/lvm" hreflang="en"><link data-rh="true" rel="alternate" href="https://ashutoshpatole.github.io/zenith/lvm" hreflang="x-default"><link rel="stylesheet" href="/zenith/assets/css/styles.e7e8a711.css">
<script src="/zenith/assets/js/runtime~main.d19c2558.js" defer="defer"></script>
<script src="/zenith/assets/js/main.85c9707f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/zenith/"><div class="navbar__logo"><img src="/zenith/img/logo.svg" alt="Zenith Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zenith/img/logo.svg" alt="Zenith Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Zenith</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zenith/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zenith/azure-intro">Cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zenith/docker-intro">Containers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zenith/linux-intro">Linux</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/linux-intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/shell-tricks">Terminal tricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/Linux/terms-in-linux">Terminologies used in linux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/exit-codes">Exit codes in linux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/vim-tricks">Vim tricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/logic-volume-commands">LVM Partition Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/acl">Access Control Lists</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/raid">Redundant Array of Independent Disks (RAID)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zenith/lvm">Logic Volume Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/network-interface-files">Network Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/bind">Berkeley Internet Name Domain (BIND)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/nfs">Network File System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/samba">Samba</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/dhcp">Dynamic Host Configuration Protocol (DHCP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/email-protocols">Email Protocols</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zenith/sssd">System Security Service Daemon (SSSD)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zenith/awk">Commands</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zenith/shell-basics">Script</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zenith/certs">Security</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/zenith/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Linux</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Logic Volume Manager</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Logic Volume Manager</h1></header><hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-lvm">What is LVM?<a href="#what-is-lvm" class="hash-link" aria-label="Direct link to What is LVM?" title="Direct link to What is LVM?">​</a></h2>
<p>Managing disk space has always been a significant task for sysadmins. Running out of disk space used to be the start of a long and complex series of tasks to increase the space available to a disk partition. It also required taking the system off-line. This usually involved installing a new hard drive, booting to recovery or single-user mode, creating a partition and a filesystem on the new hard drive, using temporary mount points to move the data from the too-small filesystem to the new, larger one, changing the content of the /etc/fstab file to reflect the correct device name for the new partition, and rebooting to remount the new filesystem on the correct mount point.</p>
<p>LVM allows for very flexible disk space management. It provides features like the ability to add disk space to a logical volume and its filesystem while that filesystem is <strong>mounted and active</strong> and it allows for the collection of multiple physical hard drives and partitions into a single volume group which can then be divided into logical volumes.</p>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>The EXT2, 3, and 4 filesystems all allow both offline (unmounted) and online (mounted) resizing when increasing the size of a filesystem, and <strong>ONLY</strong> offline resizing when reducing the size. You should check the details of the filesystems you intend to use in order to verify whether they can be resized at all and especially whether they can be resized while online.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lvm-structure">LVM Structure<a href="#lvm-structure" class="hash-link" aria-label="Direct link to LVM Structure" title="Direct link to LVM Structure">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://media.springernature.com/original/springer-static/image/chp%3A10.1007%2F978-1-4842-5455-4_1/MediaObjects/489914_1_En_1_Fig1_HTML.jpg" alt="" class="img_ev3q"></p>
<blockquote>
<p>Note: Layer numbering starts from bottom</p>
</blockquote>
<p><strong>Layer 1</strong> Physical hard drives : Self explanatory term.</p>
<p><strong>Layer 2</strong> Partitioning: This is an optional step and should be performed when you are required to deal with some portion of the physical hard drive.</p>
<p><strong>Layer 3</strong> Physical Volumes : This is the first step for LVM which acts as a individual hard drive / partition.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>The <strong><code>/boot</code></strong> partition cannot reside on an LVM volume because the GRUB boot loader cannot read it.</p></div></div>
<p><strong>Layer 4</strong> All Physcial Volumes (PV) are combined into one Volume Group (VG)</p>
<p><strong>Layer 5</strong> The VG is then divided into multiple Logic Volumes (LV) containing their own filesystem types.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-case-of-lvm">Use case of LVM<a href="#use-case-of-lvm" class="hash-link" aria-label="Direct link to Use case of LVM" title="Direct link to Use case of LVM">​</a></h2>
<ul>
<li>Creating single logical volumes of multiple physical volumes or entire hard disks (somewhat similar to RAID 0, but more similar to JBOD), allowing for dynamic volume resizing.</li>
<li>Managing large hard disk farms by allowing disks to be added and replaced without downtime or service disruption, in combination with hot swapping.</li>
<li>On small systems (like a desktop), instead of having to estimate at installation time how big a partition might need to be, LVM allows filesystems to be easily resized as needed.</li>
<li>Performing consistent backups by taking snapshots of the logical volumes.
Encrypting multiple physical partitions with one password.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-logical-volume">Adding a new logical volume<a href="#adding-a-new-logical-volume" class="hash-link" aria-label="Direct link to Adding a new logical volume" title="Direct link to Adding a new logical volume">​</a></h2>
<p>There are times when it is necessary to add a new logical volume to a host. The basic steps for adding a new logical volume are as follows.</p>
<ul>
<li>If necessary, install a new hard drive.</li>
<li>Optional: Create a partition on the hard drive.</li>
<li>Create a physical volume (PV) of the complete hard drive or a partition on the hard drive.</li>
<li>Assign the new physical volume to an existing volume group (VG) or create a new volume group.</li>
<li>Create a new logical volumes (LV) from the space in the volume group.</li>
<li>Create a filesystem on the new logical volume.</li>
<li>Add appropriate entries to <code>/etc/fstab</code> for mounting the filesystem.</li>
<li>Mount the filesystem.</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Only the EXT3 and EXT4 filesystems can be resized on the fly on a running, mounted filesystem. Many other filesystems including BTRFS and ZFS cannot be resized.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-hard-drive">Install the hard drive<a href="#install-the-hard-drive" class="hash-link" aria-label="Direct link to Install the hard drive" title="Direct link to Install the hard drive">​</a></h3>
<p>If there is not enough space on the existing hard drive(s) in the system to add the desired amount of space it may be necessary to add a new hard drive and create the space to add to the Logical Volume. First, install the physical hard drive and then perform the following steps.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lsblk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda           8:0    0   12G  0 disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─sda1        8:1    0    1G  0 part /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sda2        8:2    0   11G  0 part</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root 253:0    0  9.8G  0 lvm  /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-swap 253:1    0  1.2G  0 lvm  [SWAP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb           8:16   0    4G  0 disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sr0          11:0    1 1024M  0 rom</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see here we have sda disk with two partitions. One for <strong>boot</strong> and other is for <strong>LVM</strong>. The naming convention for LVM is mostly similar on all major distributions.</p>
<p>├─cs-root
|-VG_NAME-LV_NAME
└─cs-swap
We have around 9.8GB disk space for our root partition which is filling up quickly hence we have added a new disk <strong>sdb</strong> of 4GB. Now here comes 2 scenarios we can either assign the entire disk for PV or create a parition first and then assign it. We are going with the later one for now.
So let&#x27;s create a partition of 2GB on the /dev/sdb.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><blockquote>
<p>Note : This is an optional step and if you want to allocate entire disk space then it is not needed.</p>
</blockquote></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# fdisk /dev/sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to fdisk (util-linux 2.32.1).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Changes will remain in memory only, until you decide to write them.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Be careful before using the write command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Device does not contain a recognized partition table.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Created a new DOS disklabel with disk identifier 0x93d8aa54.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Command (m for help): n                     # n - Create a new partition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Partition type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p   primary (0 primary, 0 extended, 4 free)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   e   extended (container for logical partitions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Select (default p): p                       # p - primary partition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Partition number (1-4, default 1): 1        # 1 for naming disk as sdb1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">First sector (2048-8388607, default 2048):  # just hit enter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last sector, +sectors or +size{K,M,G,T,P} (2048-8388607, default 8388607): +2G      # + is Required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Created a new partition 1 of type &#x27;Linux&#x27; and of size 2 GiB.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Command (m for help):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Until now we have created a partition of 2GB on the disk but do not exit the fdisk utility and continue for changing the filesystem type.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Command (m for help): t                      # t - change type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Selected partition 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hex code (type L to list all codes): 8e      # 8e is hex code for Linux LVM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Changed type of partition &#x27;Linux&#x27; to &#x27;Linux LVM&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Command (m for help): w                      # w - write changes to disk </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The partition table has been altered.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Calling ioctl() to re-read partition table.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Syncing disks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We have got the parition of 2GB</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lsblk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda           8:0    0   12G  0 disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─sda1        8:1    0    1G  0 part /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sda2        8:2    0   11G  0 part</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root 253:0    0  9.8G  0 lvm  /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-swap 253:1    0  1.2G  0 lvm  [SWAP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb           8:16   0    4G  0 disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sdb1        8:17   0    2G  0 part        # &lt;== sdb1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sr0          11:0    1 1024M  0 rom</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note</strong> All commands related to LV Management is <a href="/zenith/logic-volume-commands">here</a></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-physical-volume-pv">Create a Physical Volume (PV)<a href="#create-a-physical-volume-pv" class="hash-link" aria-label="Direct link to Create a Physical Volume (PV)" title="Direct link to Create a Physical Volume (PV)">​</a></h3>
<p>As we can see we have only one PV on the machine located at /dev/sda2 and has a size of ~11GB.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# pvscan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PV /dev/sda2   VG cs              lvm2 [&lt;11.00 GiB / 0    free]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Total: 1 [&lt;11.00 GiB] / in use: 1 [&lt;11.00 GiB] / in no VG: 0 [0   ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To create a PV use pvcreate command on the disk sdb1</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# pvcreate /dev/sdb1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Physical volume &quot;/dev/sdb1&quot; successfully created.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lsblk -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        FSTYPE      LABEL UUID                                   MOUNTPOINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─sda1      xfs               d153ab14-0930-42cf-bea7-41da3b75f166   /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sda2      LVM2_member       rnPx56-D2G4-vL2i-xBMT-b06u-sldD-ffm9Th</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root xfs               20f510f9-31bf-43e8-9b57-b96c80ca82d7   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-swap swap              b09431d9-6c74-4715-87db-1841802ba5de   [SWAP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sdb1      LVM2_member       hMd1nq-oAmf-MBVI-xPsH-bqFm-wXu3-YJ91Lf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sr0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# pvscan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PV /dev/sda2   VG cs              lvm2 [&lt;11.00 GiB / 0    free]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PV /dev/sdb1                      lvm2 [2.00 GiB]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Total: 2 [&lt;13.00 GiB] / in use: 1 [&lt;11.00 GiB] / in no VG: 1 [2.00 GiB]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extending-volume-group-size">Extending Volume Group size<a href="#extending-volume-group-size" class="hash-link" aria-label="Direct link to Extending Volume Group size" title="Direct link to Extending Volume Group size">​</a></h3>
<p>Now you can see that PV collectible size is ~13GB but our PV is not connected to the VG (cs). So we have to extend our VG using vgextend command</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# vgscan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Found volume group &quot;cs&quot; using metadata type lvm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# vgextend cs /dev/sdb1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volume group &quot;cs&quot; successfully extended</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now with this 2GB of newly added space we are going to do two things.</p>
<ul>
<li>Create a new Logical volume of space 1GB.</li>
<li>Add 1GB of space to an existing root logical volume.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-new-lv">Create a new LV<a href="#create-a-new-lv" class="hash-link" aria-label="Direct link to Create a new LV" title="Direct link to Create a new LV">​</a></h3>
<p>You can verify that we have only 2 LV present on the system.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LV   VG Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  root cs -wi-ao---- 9.79g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  swap cs -wi-ao---- 1.20g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To create a new LV use lvcreate command.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvcreate --name new-lv -l 50%FREE cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Logical volume &quot;new-lv&quot; created.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LV     VG Attr       LSize    Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new-lv cs -wi-a----- 1020.00m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  root   cs -wi-ao----    9.79g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  swap   cs -wi-ao----    1.20g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><blockquote>
<p>You can also specify capital -L 1G on the command.</p>
</blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ lvcreate --name new-lv -L 1G cs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>use <code>lvcreate --help</code> to learn about it.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extending-existing-lv">Extending existing LV<a href="#extending-existing-lv" class="hash-link" aria-label="Direct link to Extending existing LV" title="Direct link to Extending existing LV">​</a></h3>
<p>As you can see the root LV size is around 9.79 GB and we are going to extend it with another 1GB.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LV     VG Attr       LSize    Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new-lv cs -wi-a----- 1020.00m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  root   cs -wi-ao----    9.79g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  swap   cs -wi-ao----    1.20g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>use lvextend to extend the existing LV.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvextend -L +1G /dev/cs/root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Size of logical volume cs/root changed from 9.79 GiB (2507 extents) to 10.79 GiB (2763 extents).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Logical volume cs/root successfully resized.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LV     VG Attr       LSize    Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new-lv cs -wi-a----- 1020.00m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  root   cs -wi-ao----   10.79g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  swap   cs -wi-ao----    1.20g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can cross verify the disk UUID of cs-root if you want.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lsblk -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           FSTYPE      LABEL UUID                                   MOUNTPOINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─sda1         xfs               d153ab14-0930-42cf-bea7-41da3b75f166   /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sda2         LVM2_member       rnPx56-D2G4-vL2i-xBMT-b06u-sldD-ffm9Th</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    xfs               20f510f9-31bf-43e8-9b57-b96c80ca82d7   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-swap    swap              b09431d9-6c74-4715-87db-1841802ba5de   [SWAP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sdb1         LVM2_member       hMd1nq-oAmf-MBVI-xPsH-bqFm-wXu3-YJ91Lf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    xfs               20f510f9-31bf-43e8-9b57-b96c80ca82d7   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-new--lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sr0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>but this hasn&#x27;t actually increased the disk space. If you check <code>df -h</code> output you will see nothing changed.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# df -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem           Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devtmpfs             887M     0  887M   0% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                907M     0  907M   0% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                907M  8.5M  898M   1% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                907M     0  907M   0% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/cs-root  9.8G  2.4G  7.5G  25% /                        # Same 9.8G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1           1014M  212M  803M  21% /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                182M     0  182M   0% /run/user/0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We have added the space but we haven&#x27;t resized it actually. To resize it use <code>xfs_growfs</code> command</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# xfs_growfs /dev/cs/new-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">meta-data=/dev/cs/new-lv    isize=512    agcount=4, agsize=641792 blks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       sectsz=512   attr=2, projid32bit=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       crc=1        finobt=1, sparse=1, rmapbt=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       reflink=1    bigtime=0 inobtcount=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data     =                       bsize=4096   blocks=2567168, imaxpct=25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       sunit=0      swidth=0 blks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">naming   =version 2              bsize=4096   ascii-ci=0, ftype=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log      =internal log           bsize=4096   blocks=2560, version=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data blocks changed from 2567168 to 2829312</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# df -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem           Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devtmpfs             887M     0  887M   0% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                907M     0  907M   0% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                907M  8.5M  898M   1% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                907M     0  907M   0% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/cs-root   11G  2.4G  8.5G  23% /                      # increased to 11G from 9.8G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1           1014M  212M  803M  21% /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                182M     0  182M   0% /run/user/0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This part is specific to the filesystem type, although the ext2/3/4 filesystem types are similar enough that they can all be resized with a single <strong>resize2fs</strong> tool. For XFS, filesystems, you would use a <strong>xfs_growfs</strong> tool instead. Other filesystems may have their own extension tools. And if the logical volume did not contain a filesystem but instead something like a &quot;raw&quot; database or an Oracle ASM volume, a yet another procedure would need to be applied.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can also use <code>-r</code> flag while extending the lvm. This will automatically increase the filesystem space.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvextend -L +1G -r /dev/cs/root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="format-the-newly-created-lv-new-lv">Format the newly created LV new-lv<a href="#format-the-newly-created-lv-new-lv" class="hash-link" aria-label="Direct link to Format the newly created LV new-lv" title="Direct link to Format the newly created LV new-lv">​</a></h3>
<p>The LV in the above examples are formated as xfs but the newly created LV is not formatted yet hence it shows nothing in the above output. To format a disk use mkfs utility.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# mkfs.xfs /dev/cs/new-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">meta-data=/dev/cs/new-lv isize=512    agcount=4, agsize=65280 blks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       sectsz=512   attr=2, projid32bit=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       crc=1        finobt=1, sparse=1, rmapbt=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       reflink=1    bigtime=0 inobtcount=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data     =                       bsize=4096   blocks=261120, imaxpct=25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       sunit=0      swidth=0 blks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">naming   =version 2              bsize=4096   ascii-ci=0, ftype=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log      =internal log           bsize=4096   blocks=1566, version=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lsblk -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           FSTYPE      LABEL UUID                                   MOUNTPOINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─sda1         xfs               d153ab14-0930-42cf-bea7-41da3b75f166   /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sda2         LVM2_member       rnPx56-D2G4-vL2i-xBMT-b06u-sldD-ffm9Th</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    xfs               20f510f9-31bf-43e8-9b57-b96c80ca82d7   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-swap    swap              b09431d9-6c74-4715-87db-1841802ba5de   [SWAP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sdb1         LVM2_member       hMd1nq-oAmf-MBVI-xPsH-bqFm-wXu3-YJ91Lf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    xfs               20f510f9-31bf-43e8-9b57-b96c80ca82d7   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-new--lv xfs               fa5880d7-2624-4bc1-9d74-0bd49193fbad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sr0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reducing-lv-size">Reducing LV Size<a href="#reducing-lv-size" class="hash-link" aria-label="Direct link to Reducing LV Size" title="Direct link to Reducing LV Size">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Please go through full section before attempting anything.</p></div></div>
<p>To decrease the size of an LVM partition you must first decrease the file system within in order to avoid possible data corruption. As there is the potential for this to happen if you enter the command incorrectly, it is strongly recommended that you have a full backup of your data before proceeding.</p>
<blockquote>
<p><em>The first step will depend on if you&#x27;re looking to shrink a <strong>LVM root volume</strong>, or <strong>non-root volume.</strong></em></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shrinking-a-root-volume">Shrinking a root volume<a href="#shrinking-a-root-volume" class="hash-link" aria-label="Direct link to Shrinking a root volume" title="Direct link to Shrinking a root volume">​</a></h3>
<p>The root volume would typically be the logical volume that is mounted to <code>/</code>. You cannot unmount this to shrink it as it&#x27;s in use by the running operating system meaning that you will have to first boot from a <strong>Live CD</strong> to complete this. Once booted into the Live CD, you may first need to run the below command to pick up LVM volumes, however this usually happens during boot so may not be required, if in doubt just run it.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# vgchange -a y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 logical volume(s) in volume group &quot;cs&quot; now active</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shrinking-a-non-root-volume">Shrinking a non-root volume<a href="#shrinking-a-non-root-volume" class="hash-link" aria-label="Direct link to Shrinking a non-root volume" title="Direct link to Shrinking a non-root volume">​</a></h3>
<p>Alternatively if the volume you are shrinking is a non-root volume, that is any other volume not mounted to the root of the file system, you can unmount the volume as shown below to proceed. Please note that when you unmount the volume the data will not be available, so you may need to schedule down time and stop running applications that use data from it prior to unmounting. Unmount by specifying either the logical volume or the location it&#x27;s currently mounted to, in the below example we specify the logical volume which can be found in <code>/dev/(vg-name)/(lv-name)</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lsblk -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           FSTYPE      LABEL UUID                                   MOUNTPOINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─sda1         xfs               d153ab14-0930-42cf-bea7-41da3b75f166   /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sda2         LVM2_member       rnPx56-D2G4-vL2i-xBMT-b06u-sldD-ffm9Th</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    xfs               20f510f9-31bf-43e8-9b57-b96c80ca82d7   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-swap    swap              b09431d9-6c74-4715-87db-1841802ba5de   [SWAP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sdb1         LVM2_member       hMd1nq-oAmf-MBVI-xPsH-bqFm-wXu3-YJ91Lf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    xfs               20f510f9-31bf-43e8-9b57-b96c80ca82d7   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-new--lv ext4              6cdb2bc5-9e63-4cd0-8048-50e06c48cacf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sr0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# umount /dev/cs/new-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>All following steps now apply to both a root or non-root volume.</strong></p>
<p>Before being able to attempt to shrink the size of an LVM volume, you must first run a file system check on it. If you don&#x27;t do this, you will get an error message and will not be able to proceed. This is a required step as resizing a file system in a bad state could cause data corruption. The <code>-f</code> flag makes the check run even if the file system appears clean, while -y assumes yes to all questions and will respond if asked to fix a problem.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# e2fsck /dev/cs/new-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e2fsck 1.45.6 (20-Mar-2020)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/cs/new-lv: clean, 11/65280 files, 8843/261120 blocks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>I have used <code>e2fsck</code> since my filesystem is ext4 for <code>cs-new--lv</code>. If it is xfs then <code>xfs_repair</code> should be used.</p></div></div>
<p>Next you need to shrink the file system, to be safe we&#x27;re going to shrink the file system lower than what the logical volume will shrink to. This is because we don&#x27;t want to accidentally shrink the logical volume to a size lower than the file system in the next step, as this can result in corruption and data loss. Don&#x27;t worry, we&#x27;ll reclaim the space at the end.</p>
<p>The command below will shrink the file system so that it is only 4G in size total, note that what ever size you specify to shrink to you must have in free space within the file system otherwise you must first delete data.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# resize2fs /dev/cs/new-lv 500M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resize2fs 1.45.6 (20-Mar-2020)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resizing the filesystem on /dev/cs/new-lv to 128000 (4k) blocks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The filesystem on /dev/cs/new-lv is now 128000 (4k) blocks long.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the file system has been reduced, we can shrink the size of the logical volume with the lvreduce command. Reduce this to the size that you want the volume to be, as specified by the -L flag. Instead if you want to reduce by a specified size, simply put a <strong><code>-</code></strong> in front of the size.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lvreduce -L -500M /dev/cs/new-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  WARNING: Reducing active logical volume to 520.00 MiB.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  THIS MAY DESTROY YOUR DATA (filesystem etc.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Do you really want to reduce cs/new-lv? [y/n]: y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Size of logical volume cs/new-lv changed from 1020.00 MiB (255 extents) to 520.00 MiB (130 extents).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Logical volume cs/new-lv successfully resized.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once you execute the lvreduce command you will get a warning advising the size you have chosen to reduce to so use this as a chance to confirm you&#x27;re shrinking the logical volume to a size that is NOT smaller than the size you previously shrunk the file system to. Once you have confirmed it&#x27;s fine to proceed enter &#x27;y&#x27; and press enter.</p>
<p>After the logical volume has been lowered to the required size, run resize2fs on the volume as this will extend the file system to use all available space within the logical volume. This makes use of all remaining free space so that none is wasted from when we previously shrunk the file system to a lower size than the logical volume.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# resize2fs /dev/cs/new-lv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resize2fs 1.45.6 (20-Mar-2020)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resizing the filesystem on /dev/cs/new-lv to 133120 (4k) blocks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The filesystem on /dev/cs/new-lv is now 133120 (4k) blocks long.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Thus our new lvm is reduced by 500M. Verified.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@centos ~]# lsblk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda              8:0    0   12G  0 disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─sda1           8:1    0    1G  0 part /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sda2           8:2    0   11G  0 part</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    253:0    0 10.8G  0 lvm  /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-swap    253:1    0  1.2G  0 lvm  [SWAP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb              8:16   0    4G  0 disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─sdb1           8:17   0    2G  0 part</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─cs-root    253:0    0 10.8G  0 lvm  /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─cs-new--lv 253:2    0  520M  0 lvm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sr0             11:0    1 1024M  0 rom</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>I have used ext4 example while demonstrating <code>lvreduce</code>. The reason is after an XFS file system is created, its size <strong>cannot</strong> be reduced. However, it can still be enlarged using the <strong>xfs_growfs</strong> command. Shrinking down an xfs filesystem would be a <em>rare</em> case on most of the production systems but just in case you get this scenario, there is a tricky workaround.</p><p>Use <code>xfsdump</code> utility and take a snapshot of the LV. Create a new LV and format it as xfs and then use <code>xfsrestore</code> command to restore it.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-02-01T11:33:41.000Z">Feb 1, 2024</time></b> by <b>AshutoshPatole18</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/zenith/raid"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Redundant Array of Independent Disks (RAID)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zenith/network-interface-files"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Network Interface</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-lvm" class="table-of-contents__link toc-highlight">What is LVM?</a></li><li><a href="#lvm-structure" class="table-of-contents__link toc-highlight">LVM Structure</a></li><li><a href="#use-case-of-lvm" class="table-of-contents__link toc-highlight">Use case of LVM</a></li><li><a href="#adding-a-new-logical-volume" class="table-of-contents__link toc-highlight">Adding a new logical volume</a><ul><li><a href="#install-the-hard-drive" class="table-of-contents__link toc-highlight">Install the hard drive</a></li><li><a href="#create-a-physical-volume-pv" class="table-of-contents__link toc-highlight">Create a Physical Volume (PV)</a></li><li><a href="#extending-volume-group-size" class="table-of-contents__link toc-highlight">Extending Volume Group size</a></li><li><a href="#create-a-new-lv" class="table-of-contents__link toc-highlight">Create a new LV</a></li><li><a href="#extending-existing-lv" class="table-of-contents__link toc-highlight">Extending existing LV</a></li><li><a href="#format-the-newly-created-lv-new-lv" class="table-of-contents__link toc-highlight">Format the newly created LV new-lv</a></li></ul></li><li><a href="#reducing-lv-size" class="table-of-contents__link toc-highlight">Reducing LV Size</a><ul><li><a href="#shrinking-a-root-volume" class="table-of-contents__link toc-highlight">Shrinking a root volume</a></li><li><a href="#shrinking-a-non-root-volume" class="table-of-contents__link toc-highlight">Shrinking a non-root volume</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>